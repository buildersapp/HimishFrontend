<html>
    <?php include('includes/head.php'); ?>
    <body class="bg-gray-50 font-sans">
        <div id="main-container" class="flex h-screen">
            <?php include('includes/sidebar.php'); ?>
            <main id="main-content" class="flex-1 overflow-auto">
                <?php include('includes/nav-header.php'); ?>

                <!-- Create Template Content -->
                <div id="create-community-content" class="p-8">
                    <div class="max-w-2xl">
                        <div id="community-form" class="bg-white rounded-xl shadow-sm border border-gray-100 p-8">
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold text-gray-900 mb-2"><?= isset($_GET['id']) ? 'Update' : 'New' ?> Template</h3>
                                <p class="text-gray-600"><?= isset($_GET['id']) ? 'Update' : 'Create a new' ?> template to streamline your outreach process.</p>
                            </div>

                            <form class="space-y-6" method="post" data-parsley-validate id="createTemplateForm" enctype="multipart/form-data" onsubmit="return validateCreateTemplate($(this));">
                                <!-- Community ID (hidden) -->
                                <input type="hidden" name="id" value="<?= $tmpID ?>" />

                                <!-- Community Name (Required) -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Title <span class="text-red-500">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        name="title"
                                        id="title" 
                                        placeholder="Enter title" 
                                        required 
                                        data-parsley-required-message="title is required"
                                        value="<?= htmlspecialchars(@$tmpData['title'], ENT_QUOTES) ?>"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-transparent" 
                                    />
                                </div>

                                <!-- Message -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                                    <textarea
                                        name="message"
                                        rows="4"
                                        placeholder="Enter your template format..."
                                        class="template-message w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-transparent resize-none"
                                    ><?= $tmpData['message'] ?></textarea>
                                </div>

                                <!-- Template Type -->
                                <div>
                                    <label for="share_type" class="block text-sm font-medium text-gray-700 mb-2">Share Type</label>
                                    <select name="type" id="type" class="block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm form-control" required data-parsley-required-message="Please select share type">
                                        <option value="">-- Select an option --</option>
                                        <option value="whatsapp" <?= @$tmpData['type'] == 'whatsapp' ? 'selected' : '' ?>>WhatsApp</option>
                                        <option value="sms" <?= @$tmpData['type'] == 'sms' ? 'selected' : '' ?>>SMS</option>
                                        <option value="email" <?= @$tmpData['type'] == 'email' ? 'selected' : '' ?>>Email</option>
                                        <option value="copy_share" <?= @$tmpData['type'] == 'copy_share' ? 'selected' : '' ?>>Copy Share</option>
                                    </select>
                                </div>

                                <!-- Submit -->
                                <button 
                                    type="submit" 
                                    name="addTemplate"
                                    id="create-community-btn" 
                                    class="w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-purple-700 transition-colors">
                                    <?= isset($_GET['id']) ? 'Update' : 'Create' ?> Template
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </body>
    <?php include('includes/footer-scripts.php'); ?>
    <script src="https://cdn.ckeditor.com/ckeditor5/40.0.0/classic/ckeditor.js?v=<?= time() ?>"></script>
    <script src="assets/js/create-template.js?v=<?= time() ?>"></script>
</html>