<!DOCTYPE html>
<html lang="en">
    <?php include('includes/head.php') ?>
    <style>
    .lgn-ds {
        background: #f2f8ff !important;
        color: #f2f8ff !important;
        border: none !important;
    }
    </style>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <body>

        <section class="set-main-single-sec set-container-1440">
            <!-- ************************************ -->
            <!-- LEFT SIDE FORM -->
            <!-- ************************************ -->
            <?php 
            $loginImage = !empty($final['login_page']['image']) 
                ? MEDIA_BASE_URL.$final['login_page']['image'] 
                : 'assets/images/login.png'; 
            ?>
            <div class="set-left-area" style="background-image: url('<?= $loginImage ?>');">
                <div class="set-box-why-choose mb-48">
                    <h1 class="f-32-w m-0">
                        <?= !empty($final['login_page']['title']) ? $final['login_page']['title'] : 'Why Choose HIMISH?' ?>
                    </h1>
                    <p class="f-24-w mt-24 mb-0">
                        <?= !empty($final['login_page']['description']) ? $final['login_page']['description'] : 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.' ?>
                    </p>
                </div>
            </div>
            <!-- ************************************ -->
            <!-- RIGHT SIDE FORM -->
            <!-- ************************************ -->
            <div class="set-right-area py-5 px-3 px-lg-4">
                <form action="" class="registration-form set-main-form mt-0" id="loginUser" data-parsley-validate>
                    <div class="set-logo-main">
                        <a href="index.html"><img src="assets/images/logo.png" alt="logo" class="img-fluid"></a>
                    </div>
                    <h2 class="f-28-b mb-1 mt-30"><?= !empty($final['login_page']['right_title']) ? $final['login_page']['right_title'] : 'Join the community!' ?></h2>
                    <p class="f-18-g m-0"><?= !empty($final['login_page']['right_description']) ? $final['login_page']['right_description'] : 'Hello there, login to continue' ?></p>
                    <div class="row align-items-center mt-16">

                        <div class="col-lg-12">
                            <div class="mt-16">
                                <label class="f-16-gb d-inline-block mb-12">Email Address</label>
                                <input type="email" name="email"  id="email" placeholder="Enter your email" class="set-input-all"  autocomplete="off" required />
                            </div>
                            <input type="hidden" name="timezone" id="timezone" />
                        </div>
                        <div class="col-lg-12">
                            <div class="mt-16">
                                <label class="f-16-gb d-inline-block mb-12">Password</label>
                                <div class="position-relative">
                                <input type="password" name="password" placeholder="Password"  id="password" class="set-input-all" autocomplete="off" required />
                                <i class="toggle-password fa fa-fw fa-eye-slash"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="mt-16">
                                <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="checkDefault">
                                <label class="form-check-label f-14-gb" for="checkDefault">Remember me</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="mt-16 text-end">
                                <a href="forgot-password.php" class="f-16-bl text-decoration-none">Forgot Password?</a>
                            </div>
                        </div>
                        <!-- SUBMIT -->
                        <div class="col-lg-12">
                            <div class="mt-24">
                                <button type="submit" class="set-btn-primary d-block" name="loginBtn" id="loginButton">Login</button>
                            </div>
                            <div class="text-center mt-16">
                                <p class="f-16-gb">Dont have an Account? <a href="early-access.php" class="f-16-bl text-decoration-none">Join us</a></p>
                            </div>
                            <!-- <div class="text-center position-relative mt-32">
                                <span class="set-border-line d-block"></span>
                                <span class="set-with-google">Or&nbsp;Sign&nbsp;Up&nbsp;With</span>
                            </div> -->
                            <!-- <div class="mt-24">
                                <div class="social-icons">
                                    <div id="g_id_onload" data-client_id="<?= GOOGLE_OAUTH_CLIENT_ID ?>" data-context="signin" data-ux_mode="popup" data-callback="handleGoogleLogin" data-auto_prompt="false"></div>

                                    <div class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="outline" data-text="signin_with" data-size="large" data-logo_alignment="left"></div>
                                </div>
                                
                            </div> -->
                            <div class="">
                                <a href="home.php">
                                    <button type="button" class="set-btn-google d-block text-center mt-20 text-decoration-none lgn-ds">
                                        <span class="guest-login-text guest-lg-fn">Continue As Guest</span>
                                    </button>
                                </a>
                            </div>
                        </div>

                    </div>
                </form>
            </div>
        </section>
        
        <!-- <footer class="footer-cll d-flex flex-wrap justify-content-between align-items-center py-3 border-top">
            <p class="col-md-4 mb-0 text-muted ms-3">&copy; <?= date('Y') ?> Himish Inc.</p>

            <ul class="nav col-md-4 justify-content-end mx-5">
                <li class="nav-item"><a href="privacy.php" class="nav-link px-2 text-muted">Privacy Policies</a></li>
                <li class="nav-item"><a href="terms.php" class="nav-link px-2 text-muted">Terms & Conditions</a></li>
                <li class="nav-item"><a href="faqs.php" class="nav-link px-2 text-muted">FAQs</a></li>
                <li class="nav-item"><a href="contact-us.php" class="nav-link px-2 text-muted">Contact Us</a></li>
            </ul>
        </footer> -->
        <!-- Include Font Awesome -->
        <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    </body>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <?php include('includes/footer-scripts.php') ?>
    <script>
        var userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        $("#timezone").val(userTimezone);

        // Handle Google login response
        function handleGoogleLogin(response) {
            fetch("google-signin.php", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ credential: response.credential, timezone: userTimezone }),
            })
                .then((res) => res.json())
                .then((data) => {
                    if (data.success) {
                        window.location.href = "home.php";
                    } else {
                        alert(data.error || "Google login failed");
                    }
                })
                .catch((err) => {
                    console.error("Google login error", err);
                    alert("An error occurred during login.");
                });
        }
    </script>
    <script>
        $(document).ready(function () {
            let initialSlideIndex = 0;

            if (window.location.pathname.includes("register.php")) {
                    initialSlideIndex = 1; // 2nd slide (index starts at 0)
                } else if (window.location.pathname.includes("email-verification.php")) {
                    initialSlideIndex = 2; // 3rd slide
                }

            $('#setSliderLogin').on('init', function () {
                $(this).css({
                    visibility: 'visible',
                    opacity: 1,
                    transition: 'opacity 0.3s ease'
                });
            });

            $('#setSliderLogin').slick({
                dots: true,
                arrows: false,
                infinite: false,
                speed: 300,
                slidesToShow: 1,
                slidesToScroll: 1,
                initialSlide: initialSlideIndex
            });
        });

    </script>
    <script>
        // HIDDEN AND VISIBLE INPUT FOR PASSWORD
        $(".toggle-password").click(function() {
            $(this).toggleClass("fa-eye fa-eye-slash");
            input = $(this).parent().find("input");
            if (input.attr("type") == "password") {
                input.attr("type", "text");
            } else {
                input.attr("type", "password");
            }
        });
    </script>
</html>