<!DOCTYPE html>
<html lang="en">
    <?php include('includes/head.php') ?>
    <body>
        <?php include('includes/nav-header.php') ?>
        <main>
            <section class="header-profile-sponsor">
                <div class="container">
                    <div class="row header-flow-row align-items-center">
                        <div class="col ps-0 ps-xl-auto">
                            <div class="header-flow-left ps-3">
                                <div class="header-flow-left-inner">
                                    <button class="header-flow-left-inner-button" onclick="
                                        if (window.history.length > 1) {
                                            window.history.back();
                                        } else {
                                            window.location.href = 'home.php';
                                        }
                                    ">
                                        <img src="assets/img/left-arrow.svg" alt="left-arrow" />
                                    </button>
                                    <span class="mx-auto d-xl-none d-block"><?= $title ?></span>
                                    <span class="me-auto d-xl-block d-none"><?= $title ?></span>
                                </div>
                            </div>
                        </div>
                        <div class="col d-xl-block d-none"></div>
                    </div>
                </div>
            </section>
            <section class="<?php echo $dashboardClass; ?>">
                <div class="<?php echo $containerClass; ?> set-ad-detail-card-unique">
                    <?php
                    // Check if there are posts
                    if (count($posts) > 0) {
                        $postCardsDetail = '';
                        // Loop through the posts and render each post using renderPostCard
                        foreach ($posts as $post) {
                            $postCardsDetail .= AdsCard($post, $isGuestMode); // Append the HTML of each post card
                        }
                    }else{
                        echo renderNoDataCard('Something went wrong !', '', 'This post is unavailable or may have been deleted.');
                    }
                    ?>
                </div>
            </section>
        </main>
        <?php include('includes/footer-scripts.php') ?>
        <script>
        // Parse URL to check if trigger=comments is present
        const params = new URLSearchParams(window.location.search);
        if (params.get('trigger') === 'comments') {
            // Find the first element with class 'post-comments-fn' and trigger click
            const commentBtn = document.querySelector('.ads-comments-fn');
            if (commentBtn) {
                commentBtn.click();
            }
        }
        </script>
    </body>
</html>